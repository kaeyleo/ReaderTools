var readerTools=function(){"use strict";function t(t,o){this.defaults={tools:["top","mode"]},this.el=t,this.isNight=!1,this.options=e(this.defaults,o),this.createElement(this.options),this.touchEvent(),this.event()}function e(t,e){for(var o in e)t[o]=e[o];return t}function o(t,e){var o={};return o.x=t.x-e.x,o.y=t.y-e.y,o}var i=function(e,o){return new t(e,o)};return t.prototype.createElement=function(t){var e={top:'<li data-action="jump-top"><i class="iconfont icon-top"></i></li>',mode:'<li data-action="night-mode"><i class="iconfont icon-moon"></i></li>'},o="";t=t.tools;for(var i in t)o+=e[t[i]];var n=document.createElement("div");n.className="reader-tools-wrapper",n.id="reader-tools",n.innerHTML='<ul class="reader-tools-panel">'+o+"</ul>",document.querySelector("body").appendChild(n)},t.prototype.touchEvent=function(){var t=document.body,e=document.getElementById("reader-tools"),i={},n={};t.addEventListener("touchstart",function(t){var e=t.changedTouches[0];i.x=e.clientX,i.y=e.clientY}),t.addEventListener("touchend",function(t){var r=t.changedTouches[0];n.x=r.clientX,n.y=r.clientY;var s=o(i,n);s.x>=80&&("-70px"===e.style.right||""===e.style.right)?e.style.right="0px":s.x<=-80&&("0px"===e.style.right||""===e.style.right)&&(e.style.right="-70px")})},t.prototype.event=function(){var t=this;document.querySelector(".reader-tools-panel").addEventListener("touchend",function(e){var o;switch("I"===e.target.nodeName?o=e.target.parentNode.dataset.action:"LI"===e.target.nodeName&&(o=e.target.dataset.action),o){case"night-mode":t.nightMode();break;case"jump-top":t.scrollTop()}})},t.prototype.scrollTop=function(){var t=setInterval(function(){window.scrollY>0?window.scrollBy(0,-100):clearInterval(t)},20)},t.prototype.nightMode=function(){var t=document.querySelector(".reader-tools-wrapper"),e=t.querySelector("li[data-action=night-mode]").getElementsByTagName("i")[0];this.el.style.transition=".6s cubic-bezier(0.4, 0, 1, 1)",this.isNight=!this.isNight,this.isNight?(e.className=e.className.replace("moon","sun"),t.style.backgroundColor="rgba(255, 255, 255, .5)",t.style.color="#000",this.el.style.backgroundColor="#222",this.el.style.color="#808080"):(e.className=e.className.replace("sun","moon"),t.style.backgroundColor="",t.style.color="",this.el.style.backgroundColor="",this.el.style.color=""),this.imgFilter()},t.prototype.imgFilter=function(){for(var t=this.el.getElementsByTagName("img"),e=0;e<t.length;e++)t[e].style.transition=".6s cubic-bezier(0.4, 0, 1, 1)",this.isNight?t[e].style.filter="brightness(.5)":t[e].style.filter=""},{init:i}}(),el=document.querySelector(".page");readerTools.init(el);